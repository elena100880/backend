<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}Backend{% endblock %}</title>
        {% block stylesheets %}
            
        <link rel="stylesheet" href="/css/base1.css">
        
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        
        <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
        <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

        <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js" integrity="sha512-T/tUfKSV1bihCnd+MxKD0Hm1uBBroVYBOYSk1knyvQ9VyZJpc/ALb4P0r6ubwVPSGB2GvjeoMAJJImBG12TiaQ==" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.standalone.min.css" integrity="sha512-TQQ3J4WkE/rwojNFo6OJdyu6G8Xe9z8rMrlF9y7xpFbQfW5g8aSWcygCQ4vqRiJqFsDsE1T6MoAOMJkFXlrI9A==" crossorigin="anonymous" />



       
        {% endblock %}

        {% block stylesheets1 %}{% endblock %}
    </head>
    <body>
        {% block body %}
            <div class="header">
                {% block header %}
                    <h1 class="logo">{% block logo %}Backend{% endblock %}</h1>
                {% endblock %}
            </div>

            <div class="content">
                {% block content %}{% endblock %}
            </div>
        {% endblock %}
        
        {% block javascripts %}


        {# widget for select fields #}
            <script>
                $(document).ready(function() {
                    $('.js-select2').select2({

                        ajax: {
                            url: '/ajax/search',
                            dataType: 'json',
                            delay: 350, // wait 350 milliseconds before triggering the request
                            
                            // Additional AJAX parameters go here;
                            data: function (params) {
                                return {
                                    q: params.term, // search term
                                    //page: params.page,
                                };
                            },

                            processResults: function (data) { 
                            //    params.page = params.page || 1;

                            // TRANSFORM RESULTS INTO SELECT2 DATA FORMAT
                            
                                   
                                return {
                                    results: $.map(data, function(obj) {
                                                                            if(obj.id!=0){
                                                                                return { id: obj.id, text: obj.name };
                                                                            }
                                                                            else
                                                                                {return {id: obj.id, text: obj.name}}
                                                                        })
                                };
                            

                                /*data = jQuery.map(data.results, function (obj) { // "results" = match the name of the toplevel JSON returned
                                        obj.id = obj.id;
                                        obj.text = obj.login;
                                        //obj.i = obj.i_name;
                                        //obj.f = obj.f_name;
                                        //obj.state = obj.state;
                                        return obj;
                                });  */
                                
                                /*return {
                                    results: data.items,
                                    //pagination: {
                                    //    more: params.page * 30 < data.total_count
                                    //  }
                                };
                               
                            },
                       
                        },

                        minimumInputLength: 2,
  
                    });
                    
                })
            </script>

        {# widget for date fields JQuery ui #}
           {# <script>
                $( function() {
                  $( ".datepicker" ).datepicker({
                    dateFormat: "yy-mm-dd",
                  });
                } );
            </script> #}

        {# widget for date fields bootstrap #}
            <script>
                $(document).ready(function() {
                    // you may need to change this code if you are not using Bootstrap Datepicker
                    $('.js-datepicker').datepicker({
                        format: 'yyyy-mm-dd',
                        clearBtn: true,
                        autoclose: true,
                    });
                });
            </script>


        {% endblock %}
    </body>
</html>
